YUI.add("moodle-atto_kalturamedia-button",function(t,e){var n="atto_kalturamedia";t.namespace("M.atto_kalturamedia").Button=t.Base.create("button",t.M.editor_atto.EditorPlugin,[],{_currentSelection:null,embedWindow:null,initializer:function(){this.addButton({icon:"icon",iconComponent:n,callback:this._kalturamedia})},_kalturamedia:function(){var e,t;this._currentSelection=this.get("host").getSelection(),!1!==this._currentSelection&&(e=window.screenLeft!=undefined?window.screenLeft:screen.left,t=window.screenTop!=undefined?window.screenTop:screen.top,e=(window.innerWidth||document.documentElement.clientWidth||screen.width)/2-600+e,t=(window.innerHeight||document.documentElement.clientHeight||screen.height)/2-350+t,t=window.open(this._getIframeURL(),M.util.get_string("browse_and_embed",n),"scrollbars=no, width=1200, height=700, top="+t+", left="+e),window.buttonJs=this,window.focus&&t.focus(),this.embedWindow=t)},_getIframeURL:function(){var e=t.mix({elementid:this.get("host").get("elementid"),contextid:this.get("contextid"),height:"600px",width:"1112px"},this.get("area"));return M.cfg.wwwroot+"/lib/editor/atto/plugins/kalturamedia/ltibrowse_container.php?"+t.QueryString.stringify(e)},_getCourseId:function(){var e,t,n=document.getElementsByTagName("body")[0].className,i=n.split(" ");for(t in i)-1<i[t].indexOf("course-")&&(e=i[t].split("-")[1]);return e},_removeProtocolFromUrl:function(e){return e.replace(/^https?:\/\//,"")},embedItem:function(e,t){var n=t.url,i=this._removeProtocolFromUrl(n),o=document.createElement("a");o.href=n,n='<a href="http://'+(i+=o.search)+'">tinymce-kalturamedia-embed||'+t.title+"||"+t.width+"||"+t.height+"</a>",(o=this.get("host")).setSelection(this._currentSelection),o.insertContentAtFocusPoint(n),this.markUpdated(),this.embedWindow.close()}},{ATTRS:{contextid:{value:null},kafuri:{value:null}}})},"@VERSION@",{requires:["moodle-editor_atto-plugin"]});